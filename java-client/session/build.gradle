plugins {
  id 'java-library'
  id 'io.deephaven.project.register'
}

description = 'The Deephaven client session library'

dependencies {
  api project(':qst')
  api project(':uri')

  Classpaths.inheritGrpcPlatform(project, 'api')
  api 'io.grpc:grpc-api'
  implementation 'io.grpc:grpc-core'
  implementation 'io.grpc:grpc-netty'

  // TODO(deephaven-core#1783): Make proto-backplane-grpc implementation dependency
  api project(':proto:proto-backplane-grpc')

  api project(':ssl-config')
  implementation project(':ssl-kickstart')
  Classpaths.inheritSSLContext(project, 'sslcontext-kickstart-for-netty')

  compileOnly project(':util-immutables')
  annotationProcessor libs.immutables

  compileOnly libs.autoservice
  annotationProcessor libs.autoservice.compiler
  compileOnly 'javax.inject:javax.inject:1'

  testImplementation platform(libs.junit.bom)
  testImplementation libs.junit.jupiter
  testRuntimeOnly libs.junit.jupiter.engine
  testRuntimeOnly libs.junit.vintage.engine
  testRuntimeOnly libs.junit.platform.launcher

  testImplementation libs.junit4
  testImplementation 'io.grpc:grpc-testing'

  testImplementation libs.assertj

  implementation libs.slf4j.api
  testRuntimeOnly libs.slf4j.simple
}

test {
  useJUnitPlatform()
}
