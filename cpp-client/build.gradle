import com.hierynomus.gradle.license.tasks.LicenseCheck
import com.hierynomus.gradle.license.tasks.LicenseFormat

plugins {
    id 'io.deephaven.project.register'
    id 'license'
}

license {
    header rootProject.file('license-header')
    include '**/*.h'
    include '**/*.cc'
    strictCheck true
    useDefaultMappings true
    ignoreFailures true
}

def licensePy = tasks.register('licensePy', LicenseCheck) {
    source = ['deephaven', 'tests', '../cpp-examples']
}

def licenseFormatPy = tasks.register('licenseFormatPy', LicenseFormat) {
    source = ['deephaven', 'tests', '../cpp-examples']
}

project.tasks.named('license').configure {
    dependsOn licensePy
}

project.tasks.named('licenseFormat').configure {
    dependsOn licenseFormatPy
}

project.tasks.named('quick').configure {
    dependsOn project.tasks.named('license')
}
