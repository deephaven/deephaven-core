plugins {
    id 'base'
    id 'java'
    id 'io.deephaven.java-license-conventions'
    id 'io.deephaven.java-toolchain-conventions'
    id 'io.deephaven.java-jar-conventions'
    id 'io.deephaven.java-resolution-conventions'
}

project.tasks.getByName('quick').dependsOn project.tasks.withType(JavaCompile)

configurations.configureEach({ c ->
    // Make dynamic versions illegal.
    c.dependencies.configureEach({
        Dependency dep ->
            if (dep.version && dep.version.endsWith('+')) {
                throw new GradleException("Dynamic versions not allowed ($dep found in $path)")
            }
    })
})

tasks.named(LifecycleBasePlugin.CLEAN_TASK_NAME) {
    Delete d ->
        d.delete('out')
}
