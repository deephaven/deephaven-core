plugins {
    id 'java'
    id 'jacoco'
}

jacoco {
    toolVersion = '0.8.12'
}

test {
    jacoco {
        destinationFile = layout.buildDirectory.file('jacoco/jacoco.exec').get().asFile
    }
    finalizedBy jacocoTestReport
}

jacocoTestReport {
    dependsOn test
    reports {
        csv.required = true
        csv.destination = layout.buildDirectory.file('reports/jacoco/java-coverage.csv').get().asFile
        xml.required = true
        xml.outputLocation = layout.buildDirectory.file('reports/jacoco/java-coverage.xml').get().asFile
        html.outputLocation = layout.buildDirectory.dir('reports/jacoco/html')
    }
}

