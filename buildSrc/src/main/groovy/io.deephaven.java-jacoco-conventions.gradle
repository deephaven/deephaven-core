plugins {
    id 'java'
    id 'jacoco'
}

def testRuntimeVersion = Integer.parseInt((String)project.findProperty('testRuntimeVersion') ?: '11')
if (testRuntimeVersion < 18) {
    jacoco {
        toolVersion = '0.8.7'
    }

    jacocoTestReport {
        reports {
            xml.enabled true
            csv.enabled true
            html.enabled true
        }
    }

    project.tasks.withType(Test).all { Test t ->
        finalizedBy jacocoTestReport
    }
}