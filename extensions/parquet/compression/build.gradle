plugins {
    id 'java-library'
    id 'io.deephaven.project.register'
    id 'io.deephaven.hadoop-common-dependencies'
}

dependencies {
    api project(':Util')

    implementation libs.parquet.hadoop
    // Also inherits hadoop-common, see io.deephaven.hadoop-common-dependencies

    implementation project(':Configuration')

    implementation libs.commons.io
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.15.1'
    // TODO Is there an alternate to specifying version, the default doesn't work

    implementation libs.guava

    compileOnly libs.jetbrains.annotations

    runtimeOnly('org.lz4:lz4-java:1.8.0') {
        // also consider lz4-pure-java to avoid native code
        because 'hadoop-common required dependency for LZ4Codec'
    }
    // Pick up default jvm-compatible compression codecs
    implementation('io.airlift:aircompressor:0.27') {
        because 'Provides Lz4, LZO, Zstd compression support for parquet'
    }

    implementation('org.xerial.snappy:snappy-java:1.1.10.5') {
        because 'Provides snappy compression for parquet, with native support for all platforms deephaven works on'
    }
}
